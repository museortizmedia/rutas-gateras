{"ast":null,"code":"import _slicedToArray from\"C:/Users/wwwdi/Downloads/Transmedia/rutas-gateras/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Sidebar(props){var slidedata=props.data;var toogleCD=props.butons;var currentCoord=props.newCoor;var webReport=props.webreport;var reloadMarkers=props.reload;/*useEffect(() => {\r\n    const keyDownHandler = event => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        console.log(formActive)\r\n        hideitself();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', keyDownHandler);\r\n    return () => {\r\n      document.removeEventListener('keydown', keyDownHandler);\r\n    }\r\n  }, []);*/var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),imageURL=_useState2[0],setImageSRC=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),imageLoaded=_useState4[0],setImageLoaded=_useState4[1];useEffect(function(){var img=new Image();img.src=slidedata.photoURL;img.onload=function(){setImageLoaded(true);setImageSRC(slidedata.photoURL);};img.onerror=function(){};},[slidedata]);var hideitself=function hideitself(){if(formActive){toogleCD();setFormActive(false);}setImageSRC(\"\");document.getElementById(\"alert\").classList.add(\"d-none\");document.getElementById(\"form\").classList.add(\"d-none\");document.getElementById(\"demo\").classList.remove(\"show\");};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),formActive=_useState6[0],setFormActive=_useState6[1];var activeform=function activeform(){if(formActive){disactiveform();return;}setFormActive(true);document.getElementById(\"form\").classList.remove(\"d-none\");toogleCD();};var disactiveform=function disactiveform(){setFormActive(false);document.getElementById(\"form\").classList.add(\"d-none\");document.getElementById(\"alert\").classList.add(\"d-none\");toogleCD();};var sendform=function sendform(){var info={x:currentCoord[0].toString().replace(\".\",\",\"),y:currentCoord[1].toString().replace(\".\",\",\"),id:slidedata.id,url:\"https://script.google.com/macros/s/AKfycbwMGzDDt_fhdIlXU6FHvcZtjHbIiKC3izFa54LNSma2oRSfEcn2PZ75mVyo2uXWF7NJAw/exec\"};webReport(info.url+\"?id=\"+info.id+\"&x=\"+info.x+\"&y=\"+info.y,function(data){disactiveform();reloadMarkers();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"offcanvas offcanvas-end\",id:\"demo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offcanvas-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"offcanvas-title\",children:slidedata===null||slidedata===void 0?void 0:slidedata.nombre}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:hideitself})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row w-75 mx-auto d-none\",id:\"alert\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success alert-dismissible\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:function onClick(){document.getElementById(\"alert\").classList.add(\"d-none\");}}),/*#__PURE__*/_jsx(\"strong\",{children:\"Enviado!\"}),\" Revisaremos tu reporte de cambio de ubicaci\\xF3n.\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"offcanvas-body element-con-scroll text-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:imageLoaded?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"img\",{className:\"img-thumbnail object-fit-cover my-5\",src:imageURL,alt:\"fotografía de estatua de \"+(slidedata===null||slidedata===void 0?void 0:slidedata.nombre)})}):/*#__PURE__*/_jsx(\"p\",{children:\"Cargando imagen...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"py-md mx-auto\",children:slidedata===null||slidedata===void 0?void 0:slidedata.desc}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-3 d-flex\",children:/*#__PURE__*/_jsxs(\"video\",{className:\"mx-auto w-auto h-50 object-fit-cover\",controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:slidedata===null||slidedata===void 0?void 0:slidedata.videoUrl,type:\"video/mp4\"}),\"Tu navegador no soporta el elemento de video.\"]})}),/*#__PURE__*/_jsx(\"button\",{className:\"my-3 btn btn-outline-info\",onClick:activeform,children:formActive?\"Cerrar Informe\":\"Informar Cambio de Ubicacion\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row d-none\",id:\"form\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mx-auto w-75\",children:\"Mueve el mapa para acomodar la marca de la nueva posicion.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",disabled:true,placeholder:\"Coordenada X\",value:currentCoord[0]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",disabled:true,placeholder:\"Coordenada Y\",value:currentCoord[1]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-75 mx-auto\",onClick:sendform,children:\"Enviar\"})]})]})]});}export default Sidebar;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Sidebar","props","slidedata","data","toogleCD","butons","currentCoord","newCoor","webReport","webreport","reloadMarkers","reload","_useState","_useState2","_slicedToArray","imageURL","setImageSRC","_useState3","_useState4","imageLoaded","setImageLoaded","img","Image","src","photoURL","onload","onerror","hideitself","formActive","setFormActive","document","getElementById","classList","add","remove","_useState5","_useState6","activeform","disactiveform","sendform","info","x","toString","replace","y","id","url","className","children","nombre","type","onClick","alt","desc","controls","videoUrl","disabled","placeholder","value"],"sources":["C:/Users/wwwdi/Downloads/Transmedia/rutas-gateras/src/components/Sidebar.jsx"],"sourcesContent":["import React from \"react\";\r\nimport {useEffect, useState} from 'react';\r\n\r\nfunction Sidebar(props) {\r\n  const slidedata = props.data;\r\n  const toogleCD = props.butons;\r\n  const currentCoord = props.newCoor;\r\n  const webReport = props.webreport;\r\n  const reloadMarkers = props.reload;\r\n  /*useEffect(() => {\r\n    const keyDownHandler = event => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        console.log(formActive)\r\n        hideitself();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', keyDownHandler);\r\n    return () => {\r\n      document.removeEventListener('keydown', keyDownHandler);\r\n    }\r\n  }, []);*/\r\n\r\n  const [imageURL, setImageSRC] = useState(\"\");\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  useEffect(() => {\r\n    const img = new Image();\r\n    img.src = slidedata.photoURL;\r\n    \r\n    img.onload = () => {\r\n      setImageLoaded(true);\r\n      setImageSRC(slidedata.photoURL);\r\n    };\r\n\r\n    img.onerror = () => {\r\n\r\n    };\r\n  }, [slidedata]);\r\n\r\n  const hideitself=()=>{\r\n      if(formActive){toogleCD(); setFormActive(false);}\r\n\r\n      setImageSRC(\"\");\r\n      \r\n      document.getElementById(\"alert\").classList.add(\"d-none\");\r\n      document.getElementById(\"form\").classList.add(\"d-none\");\r\n      \r\n\r\n      document.getElementById(\"demo\").classList.remove(\"show\");\r\n  }\r\n\r\n  const [formActive, setFormActive] = useState(false);\r\n  \r\n  const activeform=()=>{\r\n    if(formActive){disactiveform(); return;}\r\n    setFormActive(true);\r\n    document.getElementById(\"form\").classList.remove(\"d-none\");\r\n    toogleCD();\r\n  }\r\n\r\n  const disactiveform=()=>{\r\n    setFormActive(false);\r\n    document.getElementById(\"form\").classList.add(\"d-none\");\r\n\r\n    document.getElementById(\"alert\").classList.add(\"d-none\");\r\n\r\n    toogleCD();\r\n  }\r\n\r\n\r\n  const sendform=()=>{\r\n    const info = {x: currentCoord[0].toString().replace(\".\",\",\"), y: currentCoord[1].toString().replace(\".\",\",\"), id: slidedata.id, url: \"https://script.google.com/macros/s/AKfycbwMGzDDt_fhdIlXU6FHvcZtjHbIiKC3izFa54LNSma2oRSfEcn2PZ75mVyo2uXWF7NJAw/exec\"}\r\n    webReport(info.url+\"?id=\"+info.id+\"&x=\"+info.x+\"&y=\"+info.y,\r\n      (data) =>{\r\n        disactiveform();\r\n        reloadMarkers();\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n    return (\r\n        <div className=\"offcanvas offcanvas-end\" id=\"demo\">\r\n          <div className=\"offcanvas-header\">\r\n          <h1 className=\"offcanvas-title\">{slidedata?.nombre}</h1>\r\n          <button type=\"button\" className=\"btn-close\" onClick={hideitself}></button>\r\n          </div>\r\n        \r\n          <div className=\"row w-75 mx-auto d-none\" id=\"alert\">\r\n          <div className=\"alert alert-success alert-dismissible\">\r\n            <button type=\"button\" className=\"btn-close\" onClick={()=>{document.getElementById(\"alert\").classList.add(\"d-none\");}}></button>\r\n            <strong>Enviado!</strong> Revisaremos tu reporte de cambio de ubicación.\r\n          </div>\r\n          </div>\r\n\r\n        <div className=\"offcanvas-body element-con-scroll text-center\">\r\n        <div>\r\n          {imageLoaded ? (\r\n            <>\r\n              <img className=\"img-thumbnail object-fit-cover my-5\" src={imageURL} alt={\"fotografía de estatua de \"+slidedata?.nombre}/>\r\n            </>\r\n          ) : (\r\n            <p>Cargando imagen...</p>\r\n          )}\r\n        </div>\r\n          <p className=\"py-md mx-auto\">\r\n            {slidedata?.desc}\r\n          </p>\r\n          <div className=\"pt-3 d-flex\">\r\n          <video className=\"mx-auto w-auto h-50 object-fit-cover\" controls>\r\n            <source src={slidedata?.videoUrl} type=\"video/mp4\"/>\r\n            Tu navegador no soporta el elemento de video.\r\n          </video>\r\n          </div>\r\n          <button className=\"my-3 btn btn-outline-info\" onClick={activeform}>{formActive?\"Cerrar Informe\":\"Informar Cambio de Ubicacion\"}</button>\r\n          \r\n          <div className=\"row d-none\" id=\"form\">\r\n          <p className=\"mx-auto w-75\">Mueve el mapa para acomodar la marca de la nueva posicion.</p>\r\n          <div className=\"input-group mb-3\">\r\n          <input type=\"text\" className=\"form-control\" disabled placeholder=\"Coordenada X\" value={currentCoord[0]} />\r\n          <input type=\"text\" className=\"form-control\" disabled placeholder=\"Coordenada Y\"value={currentCoord[1]} />\r\n          </div> \r\n          \r\n              <button className=\"btn btn-primary w-75 mx-auto\" onClick={sendform}>Enviar</button>\r\n          </div>\r\n\r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n}\r\nexport default Sidebar;"],"mappings":"uIAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1C,QAAS,CAAAC,OAAOA,CAACC,KAAK,CAAE,CACtB,GAAM,CAAAC,SAAS,CAAGD,KAAK,CAACE,IAAI,CAC5B,GAAM,CAAAC,QAAQ,CAAGH,KAAK,CAACI,MAAM,CAC7B,GAAM,CAAAC,YAAY,CAAGL,KAAK,CAACM,OAAO,CAClC,GAAM,CAAAC,SAAS,CAAGP,KAAK,CAACQ,SAAS,CACjC,GAAM,CAAAC,aAAa,CAAGT,KAAK,CAACU,MAAM,CAClC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAEE,IAAAC,SAAA,CAAgCnB,QAAQ,CAAC,EAAE,CAAC,CAAAoB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAsCxB,QAAQ,CAAC,KAAK,CAAC,CAAAyB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA9CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC1B,SAAS,CAAC,UAAM,CACd,GAAM,CAAA6B,GAAG,CAAG,GAAI,CAAAC,KAAK,CAAC,CAAC,CACvBD,GAAG,CAACE,GAAG,CAAGrB,SAAS,CAACsB,QAAQ,CAE5BH,GAAG,CAACI,MAAM,CAAG,UAAM,CACjBL,cAAc,CAAC,IAAI,CAAC,CACpBJ,WAAW,CAACd,SAAS,CAACsB,QAAQ,CAAC,CACjC,CAAC,CAEDH,GAAG,CAACK,OAAO,CAAG,UAAM,CAEpB,CAAC,CACH,CAAC,CAAE,CAACxB,SAAS,CAAC,CAAC,CAEf,GAAM,CAAAyB,UAAU,CAAC,QAAX,CAAAA,UAAUA,CAAA,CAAK,CACjB,GAAGC,UAAU,CAAC,CAACxB,QAAQ,CAAC,CAAC,CAAEyB,aAAa,CAAC,KAAK,CAAC,CAAC,CAEhDb,WAAW,CAAC,EAAE,CAAC,CAEfc,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC,CACxDH,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC,CAGvDH,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC,CAC5D,CAAC,CAED,IAAAC,UAAA,CAAoC1C,QAAQ,CAAC,KAAK,CAAC,CAAA2C,UAAA,CAAAtB,cAAA,CAAAqB,UAAA,IAA5CP,UAAU,CAAAQ,UAAA,IAAEP,aAAa,CAAAO,UAAA,IAEhC,GAAM,CAAAC,UAAU,CAAC,QAAX,CAAAA,UAAUA,CAAA,CAAK,CACnB,GAAGT,UAAU,CAAC,CAACU,aAAa,CAAC,CAAC,CAAE,OAAO,CACvCT,aAAa,CAAC,IAAI,CAAC,CACnBC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,CAACE,MAAM,CAAC,QAAQ,CAAC,CAC1D9B,QAAQ,CAAC,CAAC,CACZ,CAAC,CAED,GAAM,CAAAkC,aAAa,CAAC,QAAd,CAAAA,aAAaA,CAAA,CAAK,CACtBT,aAAa,CAAC,KAAK,CAAC,CACpBC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC,CAEvDH,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC,CAExD7B,QAAQ,CAAC,CAAC,CACZ,CAAC,CAGD,GAAM,CAAAmC,QAAQ,CAAC,QAAT,CAAAA,QAAQA,CAAA,CAAK,CACjB,GAAM,CAAAC,IAAI,CAAG,CAACC,CAAC,CAAEnC,YAAY,CAAC,CAAC,CAAC,CAACoC,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAEC,CAAC,CAAEtC,YAAY,CAAC,CAAC,CAAC,CAACoC,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAEE,EAAE,CAAE3C,SAAS,CAAC2C,EAAE,CAAEC,GAAG,CAAE,oHAAoH,CAAC,CAC1PtC,SAAS,CAACgC,IAAI,CAACM,GAAG,CAAC,MAAM,CAACN,IAAI,CAACK,EAAE,CAAC,KAAK,CAACL,IAAI,CAACC,CAAC,CAAC,KAAK,CAACD,IAAI,CAACI,CAAC,CACzD,SAACzC,IAAI,CAAI,CACPmC,aAAa,CAAC,CAAC,CACf5B,aAAa,CAAC,CAAC,CACjB,CACF,CAAC,CACH,CAAC,CAGC,mBACIb,KAAA,QAAKkD,SAAS,CAAC,yBAAyB,CAACF,EAAE,CAAC,MAAM,CAAAG,QAAA,eAChDnD,KAAA,QAAKkD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eACjCrD,IAAA,OAAIoD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAE9C,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAE+C,MAAM,CAAK,CAAC,cACxDtD,IAAA,WAAQuD,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,WAAW,CAACI,OAAO,CAAExB,UAAW,CAAS,CAAC,EACrE,CAAC,cAENhC,IAAA,QAAKoD,SAAS,CAAC,yBAAyB,CAACF,EAAE,CAAC,OAAO,CAAAG,QAAA,cACnDnD,KAAA,QAAKkD,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDrD,IAAA,WAAQuD,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,WAAW,CAACI,OAAO,CAAE,SAAAA,QAAA,CAAI,CAACrB,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAACC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAE,CAAS,CAAC,cAC/HtC,IAAA,WAAAqD,QAAA,CAAQ,UAAQ,CAAQ,CAAC,qDAC3B,EAAK,CAAC,CACD,CAAC,cAERnD,KAAA,QAAKkD,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC9DrD,IAAA,QAAAqD,QAAA,CACG7B,WAAW,cACVxB,IAAA,CAAAI,SAAA,EAAAiD,QAAA,cACErD,IAAA,QAAKoD,SAAS,CAAC,qCAAqC,CAACxB,GAAG,CAAER,QAAS,CAACqC,GAAG,CAAE,2BAA2B,EAAClD,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAE+C,MAAM,CAAC,CAAC,CAAC,CACzH,CAAC,cAEHtD,IAAA,MAAAqD,QAAA,CAAG,oBAAkB,CAAG,CACzB,CACE,CAAC,cACJrD,IAAA,MAAGoD,SAAS,CAAC,eAAe,CAAAC,QAAA,CACzB9C,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEmD,IAAI,CACf,CAAC,cACJ1D,IAAA,QAAKoD,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC5BnD,KAAA,UAAOkD,SAAS,CAAC,sCAAsC,CAACO,QAAQ,MAAAN,QAAA,eAC9DrD,IAAA,WAAQ4B,GAAG,CAAErB,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEqD,QAAS,CAACL,IAAI,CAAC,WAAW,CAAC,CAAC,gDAEtD,EAAO,CAAC,CACH,CAAC,cACNvD,IAAA,WAAQoD,SAAS,CAAC,2BAA2B,CAACI,OAAO,CAAEd,UAAW,CAAAW,QAAA,CAAEpB,UAAU,CAAC,gBAAgB,CAAC,8BAA8B,CAAS,CAAC,cAExI/B,KAAA,QAAKkD,SAAS,CAAC,YAAY,CAACF,EAAE,CAAC,MAAM,CAAAG,QAAA,eACrCrD,IAAA,MAAGoD,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,4DAA0D,CAAG,CAAC,cAC1FnD,KAAA,QAAKkD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eACjCrD,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAACH,SAAS,CAAC,cAAc,CAACS,QAAQ,MAACC,WAAW,CAAC,cAAc,CAACC,KAAK,CAAEpD,YAAY,CAAC,CAAC,CAAE,CAAE,CAAC,cAC1GX,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAACH,SAAS,CAAC,cAAc,CAACS,QAAQ,MAACC,WAAW,CAAC,cAAc,CAAAC,KAAK,CAAEpD,YAAY,CAAC,CAAC,CAAE,CAAE,CAAC,EACpG,CAAC,cAEFX,IAAA,WAAQoD,SAAS,CAAC,8BAA8B,CAACI,OAAO,CAAEZ,QAAS,CAAAS,QAAA,CAAC,QAAM,CAAQ,CAAC,EAClF,CAAC,EAEH,CAAC,EAEH,CAAC,CAEZ,CACA,cAAe,CAAAhD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}